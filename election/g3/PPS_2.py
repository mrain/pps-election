
# coding: utf-8

# In[1]:


import matplotlib.pyplot as plt
import numpy as np


# In[2]:


num_population = 333333
voters = []
num_reps = 3 #3 by default
class Voter():
    
    def __init__(self, posx, posy, preferences):
        
        self.posx = posx
        self.posy = posy
        self.preferences = preferences #list of preferences for each party
    
        


def readMapFile(mapfile):
    read_file = open(mapfile, "r")
    data = read_file.readline()
    details = data.split(" ")
    num_population = int(details[0])
    num_parties = int(details[1])
    a = 0
    for i in range(1, num_population+1):
        voter_info = read_file.readline().split(" ")
        preferences = [float(voter_info[i]) for i in range(2,2+num_parties)]
        voter = Voter(float(voter_info[0]),float(voter_info[1]),preferences)
        voters.append(voter)
        
    
    
    read_file.close()
    
    


# In[20]:


readMapFile("../../maps/g3/g3Oct7ThreeParty.map")


# In[21]:


xvals = [voters[i].posx for i in range(len(voters))]
yvals = [voters[i].posy for i in range(len(voters))]



# In[22]:


# from sklearn.cluster import MiniBatchKMeans as MBKMeans
# kmeans = MBKMeans(n_clusters=81) 
# kmeans_data = np.vstack((xvals, yvals)).T
# kmeans.fit(kmeans_data)
# centers = kmeans.cluster_centers_
centers = np.array([[835.710147252808, 124.99952010454935], [584.6959617475881, 403.72580472371396], [534.774666613427, 195.99467752566764], [855.0243843586268, 64.09384784864886], [470.86371073723615, 767.951441394521], [304.3836792233978, 31.406049796253754], [533.9531004922281, 766.823997901422], [370.8355794206286, 562.966615538883], [435.3428127698055, 89.51931876567375], [567.7880240878857, 37.3349520218758], [457.7576070174923, 213.67424475026368], [736.4218819381535, 124.99690655625542], [562.226640553281, 626.5410660267389], [583.1690696739515, 611.3052697469726], [509.20293796593387, 755.1713836349205], [900.9156767939995, 30.18930703688837], [403.68593570858786, 560.5110553934364], [324.9600083316083, 433.9275821313264], [440.1565566546495, 38.79517197217842], [517.1810331154774, 521.3734217405986], [369.4027664512044, 58.653163554190584], [589.0447268160839, 461.4311687245951], [385.801265100813, 128.24657921292544], [448.66991070846757, 126.17456229561887], [330.1369201490025, 419.43362807229437], [895.853421901906, 48.85019719028043], [395.5223073640042, 157.03729756344677], [457.0875344106883, 110.14047475063009], [573.9347130304408, 604.5095574801506], [845.2682907268472, 17.226230094005118], [426.6513229137171, 377.3374339628611], [490.5232843073426, 793.5664290763464], [627.6134979656033, 111.75571393611737], [488.43859837861646, 609.2518556701908], [438.11305846656114, 87.00148123721571], [780.0419894375286, 199.86580650644743], [682.4468538284467, 28.253930067461596], [430.93654133343045, 179.50460004801465], [784.5706557620955, 13.611839794681678], [416.14635265306225, 637.7900335902992], [301.2875969340049, 114.95438877015563], [383.9700642600148, 127.09044787846598], [422.072112334344, 121.50447833031073], [238.0016091049747, 269.34179505229275], [765.5742523058935, 249.51627676730513], [382.6206330265433, 260.57724474898345], [464.5429179946178, 49.936113768254344], [451.899327331799, 45.879918861294136], [641.3386840695423, 348.38198892689473], [735.2620190046998, 24.698224190169952], [425.06063210755445, 485.5785163637835], [683.9010657163735, 227.4372120382204], [806.8126854353698, 251.02185527713593], [503.17177137498004, 726.9486061037619], [472.28831394976106, 773.2723688741028], [577.0703338469716, 338.8575758942224], [574.0956130328959, 95.43926561662751], [256.02274930293595, 275.0055344347154], [409.32602997263143, 429.46015017638985], [854.7335912247466, 171.40479963611443], [439.19136072835323, 49.17161457170185], [461.78898105317654, 344.27965174210823], [325.8017258369296, 218.33192282497117], [511.5274948488323, 770.5373581025785], [236.59321055322033, 273.18268239074064], [365.33468533847713, 40.10891522255831], [654.4060594496631, 432.5190142798801], [786.2026701978489, 48.8965230645113], [377.4436320589442, 457.02537234583866], [748.0003046139598, 324.3789667484219], [346.770107975532, 316.986272751073], [460.13683783271983, 727.2276670978472], [336.5399876081379, 210.66400238612155], [322.5332618703874, 403.33040126878996], [362.1392833401414, 51.74357755352632], [469.672398026138, 181.23222478736406], [780.8981573651962, 129.44365347161818], [449.43126510997246, 66.05255566296], [371.5017391156057, 107.81515298179967], [441.72302154567797, 293.6216292245968], [431.82311685168287, 677.9566098897028]])

# In[26]:


plt.figure(figsize=(200,80))
plt.scatter(xvals,yvals)


# In[27]:


plt.scatter(centers[:, 0], centers[:, 1], c='black', s=300)


# In[28]:


plt.show()


# In[29]:


from scipy.spatial import Voronoi, voronoi_plot_2d
vor = Voronoi(centers)
voronoi_plot_2d(vor)
plt.show()
print(vor.vertices)
print(vor.regions)
